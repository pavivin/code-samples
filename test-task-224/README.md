Нужно реализовать:
- REST API добавление пользователя
- REST API добавление транзакции (DEPOSIT или WITHDRAW)
- REST API получить информацию о транзакции
- REST API получить текущий баланс пользователя (без селекта всех транзакций) или баланс за дату (например, запрос "сколько у Васи было денег 5.05.2022 00:00")

Ваша реализация должна проходить тесты `pytest՝.

- python3
- sqlalchemy
- postgresql

Дополнительно:
- учесть, что сервис будет запускаться в k8s.
- учесть, что архитектура должна гарантировать обработку транзакции ровно 1 раз. Какие требования это накладывает на сам сервис и соседние сервисы?
- описать (можно не реализовывать), как можно реализовать уведомление других сервисов о транзакциях. Например, уведомить рекламный движок, который работает при наличии средств на счету.
- тезисно перечислить, какие инструменты можно применить для контроля качества работы сервиса.
- гарантировать, что баланс пользователя не может быть отрицательным.

## Запуск

```sh
docker-compose up
```

## Swagger

```
http://localhost:5000/api/docs
```

## Данные для тестирования
sql_data/*
Сами таблицы создаются при старте

### Гарантированная обработка транзакции ровно один раз
Идемпотентные операции:

Все операции должны быть идемпотентными, т.е. повторное выполнение операции не должно изменять конечный результат.
Использование внешнего транзакционного менеджера:

Например, использовать Apache Kafka с поддержкой транзакций или базу данных с поддержкой ACID транзакций.
Использование двухфазного коммита (2PC):

Обеспечивает согласованность данных при взаимодействии с несколькими сервисами.


### Уведомление других сервисов о транзакциях
Событийная архитектура:

Использование брокера сообщений (например, Apache Kafka, RabbitMQ) для публикации событий транзакций.
Подписка других сервисов на эти события для получения уведомлений.
Пример реализации:

После успешной транзакции сервис публикует событие типа "ТранзакцияУспешна" в Kafka.
Рекламный движок подписан на это событие и проверяет баланс пользователя. Если средств достаточно, выполняются дальнейшие действия.

### Инструменты для контроля качества работы сервиса
Логирование:

Использование ELK Stack (Elasticsearch, Logstash, Kibana) или Prometheus с Grafana для мониторинга логов и метрик.
Тестирование:

Юнит-тестирование (JUnit, pytest).
Интеграционное тестирование (Testcontainers).
Нагрузочное тестирование (JMeter, Locust).
CI/CD:

Использование Jenkins, GitLab CI/CD или GitHub Actions для автоматизации сборки и деплоя.
Мониторинг и алертинг:

Prometheus и Grafana для мониторинга метрик.
Alertmanager для настройки алертинга при отклонениях в работе сервиса.

### Гарантия, что баланс пользователя не может быть отрицательным
Проверка баланса перед транзакцией:

Перед выполнением транзакции проверяется текущий баланс пользователя.
Транзакция отклоняется, если на счету недостаточно средств.
Использование транзакций в базе данных:

Все операции с балансом пользователя оборачиваются в транзакции с использованием ACID.
